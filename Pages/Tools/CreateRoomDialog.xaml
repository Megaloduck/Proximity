<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Proximity.Pages.Tools.CreateRoomDialog"
             Title="Create Room"
             BackgroundColor="#80000000">

    <Border BackgroundColor="{DynamicResource PageBackgroundColor}"
            Stroke="{DynamicResource PrimaryColor}"
            StrokeThickness="2"
            Padding="30"
            Margin="40"
            VerticalOptions="Center"
            HorizontalOptions="Center"
            WidthRequest="500"
            StrokeShape="RoundRectangle 15">

        <ScrollView>
            <VerticalStackLayout Spacing="20">

                <!-- Dialog Header -->
                <VerticalStackLayout Spacing="8">
                    <Label Text="Create New Room"
                           FontSize="24"
                           FontAttributes="Bold"
                           TextColor="{DynamicResource PrimaryTextColor}"/>
                    <Label Text="Fill in the details below to create a new group channel"
                           FontSize="13"
                           TextColor="{DynamicResource SecondaryTextColor}"/>
                </VerticalStackLayout>

                <BoxView HeightRequest="1" Color="{DynamicResource BorderColor}"/>

                <!-- Room Name -->
                <VerticalStackLayout Spacing="5">
                    <Label Text="Room Name *"
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="{DynamicResource PrimaryTextColor}"/>
                    <Entry Text="{Binding NewRoomName, Mode=TwoWay}"
                           Placeholder="Enter room name (e.g., Team Chat)"
                           FontSize="16"
                           MaxLength="50"/>
                </VerticalStackLayout>

                <!-- Room Description -->
                <VerticalStackLayout Spacing="5">
                    <Label Text="Description"
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="{DynamicResource PrimaryTextColor}"/>
                    <Editor Text="{Binding NewRoomDescription, Mode=TwoWay}"
                            Placeholder="Enter room description (optional)"
                            FontSize="14"
                            HeightRequest="80"
                            MaxLength="200"/>
                </VerticalStackLayout>

                <!-- Room Icon -->
                <VerticalStackLayout Spacing="5">
                    <Label Text="Room Icon"
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="{DynamicResource PrimaryTextColor}"/>
                    <FlexLayout Wrap="Wrap" JustifyContent="Start" x:Name="RoomIconSelector">
                        <RadioButton Content="ðŸ " Value="ðŸ " GroupName="RoomIcon" CheckedChanged="OnRoomIconChecked" Style="{StaticResource EmojiRadioButtonStyle}"/>
                        <RadioButton Content="ðŸ’¬" Value="ðŸ’¬" GroupName="RoomIcon" CheckedChanged="OnRoomIconChecked" Style="{StaticResource EmojiRadioButtonStyle}"/>
                        <RadioButton Content="ðŸŽ®" Value="ðŸŽ®" GroupName="RoomIcon" CheckedChanged="OnRoomIconChecked" Style="{StaticResource EmojiRadioButtonStyle}"/>
                        <RadioButton Content="ðŸ“š" Value="ðŸ“š" GroupName="RoomIcon" CheckedChanged="OnRoomIconChecked" Style="{StaticResource EmojiRadioButtonStyle}"/>
                        <RadioButton Content="âš½" Value="âš½" GroupName="RoomIcon" CheckedChanged="OnRoomIconChecked" Style="{StaticResource EmojiRadioButtonStyle}"/>
                        <RadioButton Content="ðŸŽµ" Value="ðŸŽµ" GroupName="RoomIcon" CheckedChanged="OnRoomIconChecked" Style="{StaticResource EmojiRadioButtonStyle}"/>
                        <RadioButton Content="ðŸŽ¬" Value="ðŸŽ¬" GroupName="RoomIcon" CheckedChanged="OnRoomIconChecked" Style="{StaticResource EmojiRadioButtonStyle}"/>
                        <RadioButton Content="ðŸŒŸ" Value="ðŸŒŸ" GroupName="RoomIcon" CheckedChanged="OnRoomIconChecked" Style="{StaticResource EmojiRadioButtonStyle}"/>
                    </FlexLayout>
                </VerticalStackLayout>

                <!-- Features -->
                <VerticalStackLayout Spacing="10">
                    <Label Text="Features"
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="{DynamicResource PrimaryTextColor}"/>

                    <HorizontalStackLayout Spacing="10">
                        <CheckBox IsChecked="{Binding NewRoomHasVoice}"
                                  Color="{DynamicResource PrimaryColor}"/>
                        <Label Text="ðŸŽ¤ Enable Voice Chat"
                               FontSize="14"
                               VerticalOptions="Center"
                               TextColor="{DynamicResource PrimaryTextColor}"/>
                    </HorizontalStackLayout>

                    <HorizontalStackLayout Spacing="10">
                        <CheckBox IsChecked="{Binding NewRoomHasWhiteboard}"
                                  Color="{DynamicResource PrimaryColor}"/>
                        <Label Text="âœï¸ Enable Whiteboard"
                               FontSize="14"
                               VerticalOptions="Center"
                               TextColor="{DynamicResource PrimaryTextColor}"/>
                    </HorizontalStackLayout>

                    <HorizontalStackLayout Spacing="10">
                        <CheckBox IsChecked="{Binding NewRoomIsPrivate}"
                                  Color="{DynamicResource PrimaryColor}"/>
                        <Label Text="ðŸ”’ Private Room (requires invitation)"
                               FontSize="14"
                               VerticalOptions="Center"
                               TextColor="{DynamicResource PrimaryTextColor}"/>
                    </HorizontalStackLayout>
                </VerticalStackLayout>

                <BoxView HeightRequest="1" Color="{DynamicResource BorderColor}" Margin="0,10,0,0"/>

                <!-- Action Buttons -->
                <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
                    <Button Grid.Column="0"
                            Text="Cancel"
                            BackgroundColor="{DynamicResource SecondaryColor}"
                            Clicked="OnCancelClicked"
                            Padding="15,10"
                            FontSize="15"
                            FontAttributes="Bold"/>

                    <Button Grid.Column="1"
                            Text="Create Room"
                            BackgroundColor="{DynamicResource PrimaryColor}"
                            Clicked="OnCreateClicked"
                            Padding="15,10"
                            FontSize="15"
                            FontAttributes="Bold"/>
                </Grid>

            </VerticalStackLayout>
        </ScrollView>
    </Border>
</ContentPage>